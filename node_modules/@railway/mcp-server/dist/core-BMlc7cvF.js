import { analyzeRailwayError } from "./error-handling-mxVa5oOu.js";
import { exec } from "node:child_process";
import { promisify } from "node:util";

//#region src/cli/core.ts
const execAsync = promisify(exec);
const runRailwayCommand = async (command, cwd) => {
	const { stdout, stderr } = await execAsync(command, { cwd });
	return {
		stdout,
		stderr,
		output: stdout + stderr
	};
};
const runRailwayJsonCommand = async (command, cwd) => {
	const { stdout } = await runRailwayCommand(command, cwd);
	return JSON.parse(stdout.trim());
};
const checkRailwayCliStatus = async () => {
	try {
		await runRailwayCommand("railway --version");
		await runRailwayCommand("railway whoami");
	} catch (error) {
		return analyzeRailwayError(error, "railway whoami");
	}
};

//#endregion
export { checkRailwayCliStatus, runRailwayCommand, runRailwayJsonCommand };
//# sourceMappingURL=core-BMlc7cvF.js.map