{"version":3,"file":"create-environment-DQmdFSZ2.js","names":["error: unknown"],"sources":["../src/tools/create-environment.ts"],"sourcesContent":["import z from \"zod\";\nimport { createRailwayEnvironment } from \"../cli\";\nimport type { CreateEnvironmentOptions } from \"../cli/environments\";\nimport { createToolResponse } from \"../utils\";\n\nexport const createEnvironmentTool = {\n\tname: \"create-environment\",\n\ttitle: \"Create Environment\",\n\tdescription:\n\t\t\"Create a new Railway environment for the currently linked project. Optionally duplicate an existing environment and set service variables.\",\n\tinputSchema: {\n\t\tworkspacePath: z\n\t\t\t.string()\n\t\t\t.describe(\n\t\t\t\t\"The path to the workspace where the environment should be created\",\n\t\t\t),\n\t\tenvironmentName: z.string().describe(\"The name for the new environment\"),\n\t\tduplicateEnvironment: z\n\t\t\t.string()\n\t\t\t.optional()\n\t\t\t.describe(\"The name of an existing environment to duplicate\"),\n\t\tserviceVariables: z\n\t\t\t.array(\n\t\t\t\tz.object({\n\t\t\t\t\tservice: z.string().describe(\"The service name or UUID\"),\n\t\t\t\t\tvariable: z\n\t\t\t\t\t\t.string()\n\t\t\t\t\t\t.describe(\"The variable assignment (e.g., 'BACKEND_PORT=3000')\"),\n\t\t\t\t}),\n\t\t\t)\n\t\t\t.optional()\n\t\t\t.describe(\n\t\t\t\t\"Service variables to assign in the new environment (only works when duplicating)\",\n\t\t\t),\n\t},\n\thandler: async ({\n\t\tworkspacePath,\n\t\tenvironmentName,\n\t\tduplicateEnvironment,\n\t\tserviceVariables,\n\t}: CreateEnvironmentOptions) => {\n\t\ttry {\n\t\t\tconst result = await createRailwayEnvironment({\n\t\t\t\tworkspacePath,\n\t\t\t\tenvironmentName,\n\t\t\t\tduplicateEnvironment,\n\t\t\t\tserviceVariables,\n\t\t\t});\n\t\t\treturn createToolResponse(result);\n\t\t} catch (error: unknown) {\n\t\t\tconst errorMessage =\n\t\t\t\terror instanceof Error ? error.message : \"Unknown error occurred\";\n\t\t\treturn createToolResponse(\n\t\t\t\t\"❌ Failed to create environment\\n\\n\" +\n\t\t\t\t\t`**Error:** ${errorMessage}\\n\\n` +\n\t\t\t\t\t\"**Next Steps:**\\n\" +\n\t\t\t\t\t\"• Ensure you have a Railway project linked\\n\" +\n\t\t\t\t\t\"• Check that the environment name is valid and unique\\n\" +\n\t\t\t\t\t\"• Verify you have permissions to create environments in this project\\n\" +\n\t\t\t\t\t\"• If duplicating, ensure the source environment exists\\n\" +\n\t\t\t\t\t\"• If using service variables, ensure the service exists in the source environment\",\n\t\t\t);\n\t\t}\n\t},\n};\n"],"mappings":";;;;;AAKA,MAAa,wBAAwB;CACpC,MAAM;CACN,OAAO;CACP,aACC;CACD,aAAa;EACZ,eAAe,EACb,QAAQ,CACR,SACA,oEACA;EACF,iBAAiB,EAAE,QAAQ,CAAC,SAAS,mCAAmC;EACxE,sBAAsB,EACpB,QAAQ,CACR,UAAU,CACV,SAAS,mDAAmD;EAC9D,kBAAkB,EAChB,MACA,EAAE,OAAO;GACR,SAAS,EAAE,QAAQ,CAAC,SAAS,2BAA2B;GACxD,UAAU,EACR,QAAQ,CACR,SAAS,sDAAsD;GACjE,CAAC,CACF,CACA,UAAU,CACV,SACA,mFACA;EACF;CACD,SAAS,OAAO,EACf,eACA,iBACA,sBACA,uBAC+B;AAC/B,MAAI;GACH,MAAM,SAAS,MAAM,yBAAyB;IAC7C;IACA;IACA;IACA;IACA,CAAC;AACF,UAAO,mBAAmB,OAAO;WACzBA,OAAgB;GACxB,MAAM,eACL,iBAAiB,QAAQ,MAAM,UAAU;AAC1C,UAAO,mBACN;;aACe,aAAa;;;;;mFAO5B;;;CAGH"}