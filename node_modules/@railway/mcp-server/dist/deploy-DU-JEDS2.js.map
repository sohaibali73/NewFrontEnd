{"version":3,"file":"deploy-DU-JEDS2.js","names":["error: unknown"],"sources":["../src/tools/deploy.ts"],"sourcesContent":["import z from \"zod\";\nimport { deployRailwayProject } from \"../cli\";\nimport type { DeployOptions } from \"../cli/deployment\";\nimport { createToolResponse } from \"../utils\";\n\nexport const deployTool = {\n\tname: \"deploy\",\n\ttitle: \"Deploy to Railway\",\n\tdescription:\n\t\t\"Upload and deploy from the current directory. Supports CI mode, environment, and service options.\",\n\tinputSchema: {\n\t\tworkspacePath: z.string().describe(\"The path to the workspace to deploy\"),\n\t\tci: z\n\t\t\t.boolean()\n\t\t\t.optional()\n\t\t\t.describe(\n\t\t\t\t\"Stream build logs only, then exit (equivalent to setting $CI=true)\",\n\t\t\t),\n\t\tenvironment: z\n\t\t\t.string()\n\t\t\t.optional()\n\t\t\t.describe(\"Environment to deploy to (defaults to linked environment)\"),\n\t\tservice: z\n\t\t\t.string()\n\t\t\t.optional()\n\t\t\t.describe(\"Service to deploy to (defaults to linked service)\"),\n\t},\n\thandler: async ({\n\t\tworkspacePath,\n\t\tci,\n\t\tenvironment,\n\t\tservice,\n\t}: DeployOptions) => {\n\t\tconst {\n\t\t\tworkspacePath: wsPath,\n\t\t\tci: ciMode = false,\n\t\t\tenvironment: env,\n\t\t\tservice: svc,\n\t\t} = { workspacePath, ci, environment, service };\n\t\ttry {\n\t\t\tconst result = await deployRailwayProject({\n\t\t\t\tworkspacePath: wsPath,\n\t\t\t\tci: ciMode,\n\t\t\t\tenvironment: env,\n\t\t\t\tservice: svc,\n\t\t\t});\n\t\t\treturn createToolResponse(\n\t\t\t\t`✅ Successfully triggered a deployment for Railway project. This process will take some time to complete:\\n\\n${result}`,\n\t\t\t);\n\t\t} catch (error: unknown) {\n\t\t\tconst errorMessage =\n\t\t\t\terror instanceof Error ? error.message : \"Unknown error occurred\";\n\t\t\treturn createToolResponse(\n\t\t\t\t\"❌ Failed to deploy Railway project\\n\\n\" +\n\t\t\t\t\t`**Error:** ${errorMessage}\\n\\n` +\n\t\t\t\t\t\"**Next Steps:**\\n\" +\n\t\t\t\t\t\"• Ensure you have a Railway project linked\\n\" +\n\t\t\t\t\t\"• Check that the environment and service exist\\n\" +\n\t\t\t\t\t\"• Verify your project has the necessary files for deployment\\n\" +\n\t\t\t\t\t\"• Check that you have permissions to deploy to this project\",\n\t\t\t);\n\t\t}\n\t},\n};\n"],"mappings":";;;;;AAKA,MAAa,aAAa;CACzB,MAAM;CACN,OAAO;CACP,aACC;CACD,aAAa;EACZ,eAAe,EAAE,QAAQ,CAAC,SAAS,sCAAsC;EACzE,IAAI,EACF,SAAS,CACT,UAAU,CACV,SACA,qEACA;EACF,aAAa,EACX,QAAQ,CACR,UAAU,CACV,SAAS,4DAA4D;EACvE,SAAS,EACP,QAAQ,CACR,UAAU,CACV,SAAS,oDAAoD;EAC/D;CACD,SAAS,OAAO,EACf,eACA,IACA,aACA,cACoB;EACpB,MAAM,EACL,eAAe,QACf,IAAI,SAAS,OACb,aAAa,KACb,SAAS,QACN;GAAE;GAAe;GAAI;GAAa;GAAS;AAC/C,MAAI;GACH,MAAM,SAAS,MAAM,qBAAqB;IACzC,eAAe;IACf,IAAI;IACJ,aAAa;IACb,SAAS;IACT,CAAC;AACF,UAAO,mBACN,+GAA+G,SAC/G;WACOA,OAAgB;GACxB,MAAM,eACL,iBAAiB,QAAQ,MAAM,UAAU;AAC1C,UAAO,mBACN;;aACe,aAAa;;;;6DAM5B;;;CAGH"}