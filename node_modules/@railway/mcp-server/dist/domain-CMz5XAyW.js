import { analyzeRailwayError } from "./error-handling-mxVa5oOu.js";
import { checkRailwayCliStatus, runRailwayJsonCommand } from "./core-BMlc7cvF.js";
import { getLinkedProjectInfo } from "./projects-ENU6yIz7.js";

//#region src/cli/domain.ts
const generateRailwayDomain = async ({ workspacePath, service }) => {
	try {
		await checkRailwayCliStatus();
		const projectResult = await getLinkedProjectInfo({ workspacePath });
		if (!projectResult.success) throw new Error(projectResult.error);
		let command = "railway domain --json";
		if (service) command += ` --service ${service}`;
		const domainResult = await runRailwayJsonCommand(command, workspacePath);
		if (domainResult.domain) return domainResult.domain;
		throw new Error("No domain found in Railway CLI JSON response");
	} catch (error) {
		return analyzeRailwayError(error, "railway domain --json");
	}
};

//#endregion
export { generateRailwayDomain };
//# sourceMappingURL=domain-CMz5XAyW.js.map