{"version":3,"file":"error-handling-mxVa5oOu.js","names":[],"sources":["../src/cli/error-handling.ts"],"sourcesContent":["export const ERROR_PATTERNS = {\n\tUNAUTHORIZED: /Unauthorized\\. Please login with `railway login`/,\n\tINVALID_TOKEN: /Unauthorized/,\n\tNO_LINKED_PROJECT:\n\t\t/No linked project found\\. Run railway link to connect to a project/,\n\tPROJECT_NOT_FOUND:\n\t\t/Project not found\\. Run `railway link` to connect to a project\\./,\n\tPROJECT_DELETED:\n\t\t/Project is deleted\\. Run `railway link` to connect to a project\\./,\n\tENVIRONMENT_DELETED:\n\t\t/Environment is deleted\\. Run `railway environment` to connect to an environment\\./,\n\tSERVICE_NOT_FOUND: /Service \"[^\"]+\" not found\\./,\n\tNO_SERVICES: /Project has no services\\./,\n\tNO_SERVICE_LINKED:\n\t\t/No service linked\\nRun `railway service` to link a service/,\n\tNO_PROJECTS: /No projects found\\. Run `railway init` to create a new project/,\n} as const;\n\ntype RailwayError = {\n\tcode?: string;\n\tstdout?: string;\n\tstderr?: string;\n\tmessage?: string;\n};\n\nexport const analyzeRailwayError = (error: unknown, command: string): never => {\n\tconst err = error as RailwayError;\n\tconst output = (err.stdout || \"\") + (err.stderr || \"\");\n\n\tif (ERROR_PATTERNS.UNAUTHORIZED.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"Not logged in to Railway CLI. Please run 'railway login' first\",\n\t\t);\n\t}\n\n\tif (\n\t\tERROR_PATTERNS.INVALID_TOKEN.test(output) &&\n\t\t!ERROR_PATTERNS.UNAUTHORIZED.test(output)\n\t) {\n\t\tthrow new Error(\n\t\t\t\"Invalid or expired Railway token. Please run 'railway login' to refresh your authentication\",\n\t\t);\n\t}\n\n\tif (ERROR_PATTERNS.NO_LINKED_PROJECT.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"No Railway project is linked. Run 'railway link' to connect to a project\",\n\t\t);\n\t}\n\n\tif (ERROR_PATTERNS.PROJECT_NOT_FOUND.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"Project not found. Run 'railway link' to connect to a project\",\n\t\t);\n\t}\n\n\tif (ERROR_PATTERNS.PROJECT_DELETED.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"Project has been deleted. Run 'railway link' to connect to a different project\",\n\t\t);\n\t}\n\n\tif (ERROR_PATTERNS.ENVIRONMENT_DELETED.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"Environment has been deleted. Run 'railway environment' to connect to an environment\",\n\t\t);\n\t}\n\n\tif (ERROR_PATTERNS.SERVICE_NOT_FOUND.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"Service not found. Run 'railway service <service-name>' to link a service\",\n\t\t);\n\t}\n\n\tif (ERROR_PATTERNS.NO_SERVICES.test(output)) {\n\t\tthrow new Error(\"Project has no services. Create a service first\");\n\t}\n\n\tif (ERROR_PATTERNS.NO_SERVICE_LINKED.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"No service linked. Run 'railway service <service-name>' to link a service\",\n\t\t);\n\t}\n\n\tif (ERROR_PATTERNS.NO_PROJECTS.test(output)) {\n\t\tthrow new Error(\n\t\t\t\"No projects found. Run 'railway init' to create a new project\",\n\t\t);\n\t}\n\n\t// Generic error handling\n\tif (err.code === \"ENOENT\") {\n\t\tthrow new Error(\n\t\t\t\"Railway CLI is not installed. Please install it first: https://docs.railway.com/guides/cli\",\n\t\t);\n\t}\n\n\t// If we have a specific error message, use it\n\tif (err.message) {\n\t\tthrow new Error(`Railway CLI error: ${err.message}`);\n\t}\n\n\t// Fallback error\n\n\tthrow new Error(`Railway CLI command '${command}' failed with unknown error`);\n};\n"],"mappings":";AAAA,MAAa,iBAAiB;CAC7B,cAAc;CACd,eAAe;CACf,mBACC;CACD,mBACC;CACD,iBACC;CACD,qBACC;CACD,mBAAmB;CACnB,aAAa;CACb,mBACC;CACD,aAAa;CACb;AASD,MAAa,uBAAuB,OAAgB,YAA2B;CAC9E,MAAM,MAAM;CACZ,MAAM,UAAU,IAAI,UAAU,OAAO,IAAI,UAAU;AAEnD,KAAI,eAAe,aAAa,KAAK,OAAO,CAC3C,OAAM,IAAI,MACT,iEACA;AAGF,KACC,eAAe,cAAc,KAAK,OAAO,IACzC,CAAC,eAAe,aAAa,KAAK,OAAO,CAEzC,OAAM,IAAI,MACT,8FACA;AAGF,KAAI,eAAe,kBAAkB,KAAK,OAAO,CAChD,OAAM,IAAI,MACT,2EACA;AAGF,KAAI,eAAe,kBAAkB,KAAK,OAAO,CAChD,OAAM,IAAI,MACT,gEACA;AAGF,KAAI,eAAe,gBAAgB,KAAK,OAAO,CAC9C,OAAM,IAAI,MACT,iFACA;AAGF,KAAI,eAAe,oBAAoB,KAAK,OAAO,CAClD,OAAM,IAAI,MACT,uFACA;AAGF,KAAI,eAAe,kBAAkB,KAAK,OAAO,CAChD,OAAM,IAAI,MACT,4EACA;AAGF,KAAI,eAAe,YAAY,KAAK,OAAO,CAC1C,OAAM,IAAI,MAAM,kDAAkD;AAGnE,KAAI,eAAe,kBAAkB,KAAK,OAAO,CAChD,OAAM,IAAI,MACT,4EACA;AAGF,KAAI,eAAe,YAAY,KAAK,OAAO,CAC1C,OAAM,IAAI,MACT,gEACA;AAIF,KAAI,IAAI,SAAS,SAChB,OAAM,IAAI,MACT,6FACA;AAIF,KAAI,IAAI,QACP,OAAM,IAAI,MAAM,sBAAsB,IAAI,UAAU;AAKrD,OAAM,IAAI,MAAM,wBAAwB,QAAQ,6BAA6B"}