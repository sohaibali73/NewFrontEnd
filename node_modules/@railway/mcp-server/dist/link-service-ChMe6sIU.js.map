{"version":3,"file":"link-service-ChMe6sIU.js","names":["error: unknown"],"sources":["../src/tools/link-service.ts"],"sourcesContent":["import z from \"zod\";\nimport { getRailwayServices, linkRailwayService } from \"../cli\";\nimport type { LinkServiceOptions } from \"../cli/services\";\nimport { createToolResponse } from \"../utils\";\n\nexport const linkServiceTool = {\n\tname: \"link-service\",\n\ttitle: \"Link Railway Service\",\n\tdescription:\n\t\t\"Link a service to the current Railway project. If no service is specified, it will list available services\",\n\tinputSchema: {\n\t\tworkspacePath: z\n\t\t\t.string()\n\t\t\t.describe(\"The path to the workspace to link the service to\"),\n\t\tserviceName: z.string().optional().describe(\"The service name to link\"),\n\t},\n\thandler: async ({ workspacePath, serviceName }: LinkServiceOptions) => {\n\t\ttry {\n\t\t\tif (serviceName) {\n\t\t\t\t// Link the specified service\n\t\t\t\tconst result = await linkRailwayService({\n\t\t\t\t\tworkspacePath,\n\t\t\t\t\tserviceName,\n\t\t\t\t});\n\t\t\t\treturn createToolResponse(\n\t\t\t\t\t`✅ Successfully linked service '${serviceName}':\\n\\n${result}`,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// List available services\n\t\t\t\tconst servicesResult = await getRailwayServices({ workspacePath });\n\t\t\t\tif (!servicesResult.success) {\n\t\t\t\t\treturn createToolResponse(\n\t\t\t\t\t\t\"❌ Failed to get Railway services\\n\\n\" +\n\t\t\t\t\t\t\t`**Error:** ${servicesResult.error}\\n\\n` +\n\t\t\t\t\t\t\t\"**Next Steps:**\\n\" +\n\t\t\t\t\t\t\t\"• Ensure you have a Railway project linked\\n\" +\n\t\t\t\t\t\t\t\"• Check that you have permissions to view services\\n\" +\n\t\t\t\t\t\t\t\"• Run `railway link` to ensure proper project connection\",\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (!servicesResult.services || servicesResult.services.length === 0) {\n\t\t\t\t\treturn createToolResponse(\n\t\t\t\t\t\t\"ℹ️ No services found in this project. Create a service first.\",\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst result = `Available services:\\n${servicesResult.services.map((s) => `- ${s}`).join(\"\\n\")}\\n\\nRun with a service name to link it.`;\n\t\t\t\treturn createToolResponse(result);\n\t\t\t}\n\t\t} catch (error: unknown) {\n\t\t\tconst errorMessage =\n\t\t\t\terror instanceof Error ? error.message : \"Unknown error occurred\";\n\t\t\treturn createToolResponse(\n\t\t\t\t\"❌ Failed to link Railway service\\n\\n\" +\n\t\t\t\t\t`**Error:** ${errorMessage}\\n\\n` +\n\t\t\t\t\t\"**Next Steps:**\\n\" +\n\t\t\t\t\t\"• Ensure you have a Railway project linked\\n\" +\n\t\t\t\t\t\"• Check that the service name is correct\\n\" +\n\t\t\t\t\t\"• Verify you have permissions to link services\\n\" +\n\t\t\t\t\t\"• Run `railway link` to ensure proper project connection\",\n\t\t\t);\n\t\t}\n\t},\n};\n"],"mappings":";;;;;AAKA,MAAa,kBAAkB;CAC9B,MAAM;CACN,OAAO;CACP,aACC;CACD,aAAa;EACZ,eAAe,EACb,QAAQ,CACR,SAAS,mDAAmD;EAC9D,aAAa,EAAE,QAAQ,CAAC,UAAU,CAAC,SAAS,2BAA2B;EACvE;CACD,SAAS,OAAO,EAAE,eAAe,kBAAsC;AACtE,MAAI;AACH,OAAI,aAAa;IAEhB,MAAM,SAAS,MAAM,mBAAmB;KACvC;KACA;KACA,CAAC;AACF,WAAO,mBACN,kCAAkC,YAAY,QAAQ,SACtD;UACK;IAEN,MAAM,iBAAiB,MAAM,mBAAmB,EAAE,eAAe,CAAC;AAClE,QAAI,CAAC,eAAe,QACnB,QAAO,mBACN;;aACe,eAAe,MAAM;;;4DAKpC;AAGF,QAAI,CAAC,eAAe,YAAY,eAAe,SAAS,WAAW,EAClE,QAAO,mBACN,gEACA;IAGF,MAAM,SAAS,wBAAwB,eAAe,SAAS,KAAK,MAAM,KAAK,IAAI,CAAC,KAAK,KAAK,CAAC;AAC/F,WAAO,mBAAmB,OAAO;;WAE1BA,OAAgB;GACxB,MAAM,eACL,iBAAiB,QAAQ,MAAM,UAAU;AAC1C,UAAO,mBACN;;aACe,aAAa;;;;4DAM5B;;;CAGH"}