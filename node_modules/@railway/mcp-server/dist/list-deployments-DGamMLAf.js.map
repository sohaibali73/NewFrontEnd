{"version":3,"file":"list-deployments-DGamMLAf.js","names":["error: unknown"],"sources":["../src/tools/list-deployments.ts"],"sourcesContent":["import z from \"zod\";\nimport type { ListDeploymentsOptions } from \"../cli/deployment\";\nimport { listDeployments } from \"../cli/deployment\";\nimport { createToolResponse } from \"../utils\";\n\nexport const listDeploymentsTool = {\n  name: \"list-deployments\",\n  title: \"List Railway Deployments\",\n  description:\n    \"List deployments for a Railway service with IDs, statuses and other metadata. Requires Railway CLI v4.10.0+.\",\n  inputSchema: {\n    workspacePath: z\n      .string()\n      .describe(\"The path to the workspace to list deployments from\"),\n    service: z\n      .string()\n      .optional()\n      .describe(\n        \"Service name or ID to list deployments for (defaults to linked service)\"\n      ),\n    environment: z\n      .string()\n      .optional()\n      .describe(\n        \"Environment to list deployments from (defaults to linked environment)\"\n      ),\n    limit: z\n      .number()\n      .min(1)\n      .max(1000)\n      .default(20)\n      .optional()\n      .describe(\n        \"Maximum number of deployments to show (default: 20, max: 1000)\"\n      ),\n    json: z\n      .boolean()\n      .default(false)\n      .optional()\n      .describe(\n        \"Return deployments as structured JSON data. When true, the output will contain ids, statuses, and other metadata\"\n      ),\n  },\n  handler: async (options: ListDeploymentsOptions) => {\n    try {\n      const result = await listDeployments(options);\n\n      if (!result.success) {\n        throw new Error(result.error);\n      }\n\n      return createToolResponse(result.output);\n    } catch (error: unknown) {\n      const errorMessage =\n        error instanceof Error ? error.message : \"Unknown error occurred\";\n      return createToolResponse(\n        \"❌ Failed to list Railway deployments\\n\\n\" +\n          `**Error:** ${errorMessage}\\n\\n` +\n          \"**Next Steps:**\\n\" +\n          \"• Ensure you are logged into Railway CLI (`railway login`)\\n\" +\n          \"• Check that you have a project linked (`railway link`)\\n\" +\n          \"• Verify you have permissions to view deployments\\n\" +\n          \"• Try running `railway login` to refresh your authentication\"\n      );\n    }\n  },\n};\n"],"mappings":";;;;;AAKA,MAAa,sBAAsB;CACjC,MAAM;CACN,OAAO;CACP,aACE;CACF,aAAa;EACX,eAAe,EACZ,QAAQ,CACR,SAAS,qDAAqD;EACjE,SAAS,EACN,QAAQ,CACR,UAAU,CACV,SACC,0EACD;EACH,aAAa,EACV,QAAQ,CACR,UAAU,CACV,SACC,wEACD;EACH,OAAO,EACJ,QAAQ,CACR,IAAI,EAAE,CACN,IAAI,IAAK,CACT,QAAQ,GAAG,CACX,UAAU,CACV,SACC,iEACD;EACH,MAAM,EACH,SAAS,CACT,QAAQ,MAAM,CACd,UAAU,CACV,SACC,mHACD;EACJ;CACD,SAAS,OAAO,YAAoC;AAClD,MAAI;GACF,MAAM,SAAS,MAAM,gBAAgB,QAAQ;AAE7C,OAAI,CAAC,OAAO,QACV,OAAM,IAAI,MAAM,OAAO,MAAM;AAG/B,UAAO,mBAAmB,OAAO,OAAO;WACjCA,OAAgB;GACvB,MAAM,eACJ,iBAAiB,QAAQ,MAAM,UAAU;AAC3C,UAAO,mBACL;;aACgB,aAAa;;;;gEAM9B;;;CAGN"}