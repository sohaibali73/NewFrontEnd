import { analyzeRailwayError } from "./error-handling-mxVa5oOu.js";
import { checkRailwayCliStatus, runRailwayCommand } from "./core-BMlc7cvF.js";
import { getLinkedProjectInfo } from "./projects-ENU6yIz7.js";

//#region src/cli/services.ts
const getRailwayServices = async ({ workspacePath }) => {
	try {
		await checkRailwayCliStatus();
		const result = await getLinkedProjectInfo({ workspacePath });
		if (!result.success) throw new Error(result.error);
		const { output } = await runRailwayCommand("railway status --json", workspacePath);
		return {
			success: true,
			services: JSON.parse(output).services?.edges?.map((edge) => edge.node.name) || []
		};
	} catch (error) {
		return {
			success: false,
			error: error instanceof Error ? error.message : String(error)
		};
	}
};
const linkRailwayService = async ({ workspacePath, serviceName }) => {
	try {
		await checkRailwayCliStatus();
		const result = await getLinkedProjectInfo({ workspacePath });
		if (!result.success) throw new Error(result.error);
		const { output } = await runRailwayCommand(`railway service ${serviceName}`, workspacePath);
		return output;
	} catch (error) {
		return analyzeRailwayError(error, "railway service");
	}
};

//#endregion
export { getRailwayServices, linkRailwayService };
//# sourceMappingURL=services-BXZqOgoN.js.map