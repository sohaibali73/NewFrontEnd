{"version":3,"file":"services-BXZqOgoN.js","names":["error: unknown"],"sources":["../src/cli/services.ts"],"sourcesContent":["import { checkRailwayCliStatus, runRailwayCommand } from \"./core\";\nimport { analyzeRailwayError } from \"./error-handling\";\nimport { getLinkedProjectInfo } from \"./projects\";\n\nexport type GetServicesOptions = {\n\tworkspacePath: string;\n};\n\nexport const getRailwayServices = async ({\n\tworkspacePath,\n}: GetServicesOptions): Promise<{\n\tsuccess: boolean;\n\tservices?: string[];\n\terror?: string;\n}> => {\n\ttry {\n\t\tawait checkRailwayCliStatus();\n\t\tconst result = await getLinkedProjectInfo({ workspacePath });\n\t\tif (!result.success) {\n\t\t\tthrow new Error(result.error);\n\t\t}\n\n\t\tconst { output } = await runRailwayCommand(\n\t\t\t\"railway status --json\",\n\t\t\tworkspacePath,\n\t\t);\n\n\t\t// Parse the JSON output to extract services\n\t\tconst statusData = JSON.parse(output);\n\n\t\t// Extract services from the JSON structure\n\t\tconst services =\n\t\t\tstatusData.services?.edges?.map(\n\t\t\t\t(edge: { node: { name: string } }) => edge.node.name,\n\t\t\t) || [];\n\n\t\treturn { success: true, services };\n\t} catch (error: unknown) {\n\t\tconst errorMessage = error instanceof Error ? error.message : String(error);\n\t\treturn { success: false, error: errorMessage };\n\t}\n};\n\nexport type LinkServiceOptions = {\n\tworkspacePath: string;\n\tserviceName: string;\n};\n\nexport const linkRailwayService = async ({\n\tworkspacePath,\n\tserviceName,\n}: LinkServiceOptions): Promise<string> => {\n\ttry {\n\t\tawait checkRailwayCliStatus();\n\t\tconst result = await getLinkedProjectInfo({ workspacePath });\n\t\tif (!result.success) {\n\t\t\tthrow new Error(result.error);\n\t\t}\n\n\t\tconst { output } = await runRailwayCommand(\n\t\t\t`railway service ${serviceName}`,\n\t\t\tworkspacePath,\n\t\t);\n\n\t\treturn output;\n\t} catch (error: unknown) {\n\t\treturn analyzeRailwayError(error, \"railway service\");\n\t}\n};\n"],"mappings":";;;;;AAQA,MAAa,qBAAqB,OAAO,EACxC,oBAKK;AACL,KAAI;AACH,QAAM,uBAAuB;EAC7B,MAAM,SAAS,MAAM,qBAAqB,EAAE,eAAe,CAAC;AAC5D,MAAI,CAAC,OAAO,QACX,OAAM,IAAI,MAAM,OAAO,MAAM;EAG9B,MAAM,EAAE,WAAW,MAAM,kBACxB,yBACA,cACA;AAWD,SAAO;GAAE,SAAS;GAAM,UARL,KAAK,MAAM,OAAO,CAIzB,UAAU,OAAO,KAC1B,SAAqC,KAAK,KAAK,KAChD,IAAI,EAAE;GAE0B;UAC1BA,OAAgB;AAExB,SAAO;GAAE,SAAS;GAAO,OADJ,iBAAiB,QAAQ,MAAM,UAAU,OAAO,MAAM;GAC7B;;;AAShD,MAAa,qBAAqB,OAAO,EACxC,eACA,kBAC0C;AAC1C,KAAI;AACH,QAAM,uBAAuB;EAC7B,MAAM,SAAS,MAAM,qBAAqB,EAAE,eAAe,CAAC;AAC5D,MAAI,CAAC,OAAO,QACX,OAAM,IAAI,MAAM,OAAO,MAAM;EAG9B,MAAM,EAAE,WAAW,MAAM,kBACxB,mBAAmB,eACnB,cACA;AAED,SAAO;UACCA,OAAgB;AACxB,SAAO,oBAAoB,OAAO,kBAAkB"}